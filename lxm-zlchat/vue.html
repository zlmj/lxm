<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <link href="./lxm-css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./lxm-css/demo.css">
    <script src="./lxm-js/jquery.min.js"></script>
    <script src="./lxm-js/bootstrap.min.js"></script>
    <!-- <script src="./lxm-js/demo.js"></script> -->
    <!-- <script src="./lxm-js/vue.min.js"></script> -->
    <title>vue.js</title>
    </style>
</head>
<body>
    <div class="container">
        <div class="row" style="height: 100%;position: relative;">
            <div class="col-md-4 "  style="height: 100%;">
                <!-- 搜索框 -->
                    <div class="input-group" style="margin-top: 30px;">
                        <span class="input-group-addon" id="search_img" ><span class="glyphicon glyphicon-search" aria-hidden="true"  onclick="search()"></span></span>
                        <input type="text" class="form-control"id="search_1" placeholder="请输入搜索关键字...">
                        </div>
                    <!-- <p class="text-center">表格</p> -->
                    <div class="table-responsive " style="margin-top: 20px;">
                        <table class="table table-hover">
                            <tbody class="list_1">
                                <tr class="list_2" @click="chatlist">
                                    <td rowspan="2">
                                    <img src="./img/user1.jpg" class="img-responsive img-circle" style="width: 75px;height:50px;"></td>
                                    <td>标题1</td>
                                    <td>时间</td>
                                </tr>
                                <tr :class="list_2" @click="chatlist">
                                    <td colspan="2">讨论内容</td>
                                </tr v-on:click="chatlist">
                                    <tr class="list_2" @click="chatlist">
                                        <td rowspan="2">
                                            <img src="./img/user1.jpg" class="img-responsive img-circle" style="width: 75px;height:50px;"></td>
                                        <td>标题2</td>
                                        <td>时间</td>
                                    </tr>
                                    <tr class="list_2" @click="chatlist">
                                        <td>讨论内容</td>
                                    </tr>
                        </table>
                    </div>
                    <nav>
                        <ul class="pager"  style="bottom:0px;position: fixed;">
                            <li><a href="#">上一页</a></li>
                            <li><a href="#">下一页</a></li>
                        </ul>
                    </nav>
            </div>
            <div class="col-md-8"  style="height: 100%;">
                <!-- 头部 -->
                <div class="header">
                        <p class="h3 text-center">通用讨论</p>
                        <img src="./img/logo.png" id="logo">
                </div>
                <!-- 聊天框content -->
                <div class="content">
                    <div class="date">Moday,1:27 PM</div>
                <div class="chat-list">
                    <span class="himg"></span>
                    <div class="userlist">张三&nbsp;&nbsp;&nbsp;&nbsp;2019-10-14 15:34:20</div>
                    <div class="comment you">hello,my name is zhangsan</div>
                </div>

                </div>
                <!-- 底部write 应用了输入框组 -->
                <div class="input-group" style="position:absolute;bottom:0px;width: 94%;">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-paperclip" aria-hidden="true"></span></span>
                    <input type="text" class="form-control" id="tmsg" placeholder="请输入内容">
                    <span class="input-group-addon" @click="send()"><span class="glyphicon glyphicon-send" aria-hidden="true" @click="send()"></span></span>
                </div>
                </div>
            </div>>
<script type="text/javascript">
    var vm=new Vue({
        el:".list_2",
        e2:"#tmsg",
        // historymsg:[{user:"张三",time:'2019-10-14 16:42:09',msg:"how are you?"},{user:"李四",time:'2019-10-14 16:42:09',msg:"i'm fan!"},{user:"王五",time:'2019-10-14 16:42:09',msg:"Ok"}],
        data:{
            // historymsg:[{user:"张三",time:'2019-10-14 16:42:09',msg:"how are you?"},{user:"李四",time:'2019-10-14 16:42:09',msg:"i'm fan!"},{user:"王五",time:'2019-10-14 16:42:09',msg:"Ok"}],
        },
        
        methods:{
            // 点击讨论组列表时加载聊天框数据
            chatlist:function(){
                //  alert("hello");
               var historymsg=[{user:"张三",time:'2019-10-14 16:42:09',msg:"how are you?"},{user:"李四",time:'2019-10-14 16:42:09',msg:"i'm fan!"},{user:"王五",time:'2019-10-14 16:42:09',msg:"Ok"}];
        var temp='<span class="himg right"></span><div class="userlist right">{0}{1}</div><div class="comment me">{2}</div>';
        var chart=document.getElementsByClassName("content");
        historymsg.forEach(element => {
            var ele=document.createElement("div")
            ele.className="chat-list";
                ele.innerHTML='<span class="himg right"></span><div class="userlist right">'+element.user+'&nbsp;&nbsp;&nbsp;&nbsp;'+element.time+'</div><div class="comment me">'+element.msg+'</div>';
            chart[0].append(ele);
            // $(".bg-primary").html("");
        });
        chart[0].scrollTop=chart[0].scrollHeight;
    }
},
  //发送消息
  send:function(){
    alert("hello");
    var tmsg=document.getElementById("tmsg");
    if(tmsg.value){
        var nowtime=new Date();
        var time=nowtime.Format("yyyy-MM-dd HH:mm:ss");
        var msg={user:curuser.user,time:time,msg:tmsg.value};
        var ele=document.createElement("div")
        ele.className="chat-list";
        ele.innerHTML='<span class="himg right"></span><div class="userlist right">'+msg.user+'&nbsp;&nbsp;&nbsp;&nbsp;'+msg.time+'</div><div class="comment me">'+msg.msg+'</div>';
        var chart=document.getElementsByClassName("content");
        chart[0].appendChild(ele);
        tmsg.value="";
        chart[0].scrollTop=chart[0].scrollHeight;
    }
},

Date : function (formatStr) {
    var str = formatStr;
    var Week = ['日', '一', '二', '三', '四', '五', '六'];

    str = str.replace(/yyyy|YYYY/, this.getFullYear());
    str = str.replace(/yy|YY/, (this.getYear() % 100) > 9 ? (this.getYear() % 100).toString() : '0' + (this.getYear() % 100));

    str = str.replace(/MM/, this.getMonth() > 8 ? (this.getMonth() + 1).toString() : '0' + (this.getMonth() + 1));
    str = str.replace(/M/g, this.getMonth() + 1);

    str = str.replace(/w|W/g, Week[this.getDay()]);

    str = str.replace(/dd|DD/, this.getDate() > 9 ? this.getDate().toString() : '0' + this.getDate());
    str = str.replace(/d|D/g, this.getDate());

    str = str.replace(/hh|HH/, this.getHours() > 9 ? this.getHours().toString() : '0' + this.getHours());
    str = str.replace(/h|H/g, this.getHours());
    str = str.replace(/mm/, this.getMinutes() > 9 ? this.getMinutes().toString() : '0' + this.getMinutes());
    str = str.replace(/m/g, this.getMinutes());

    str = str.replace(/ss|SS/, this.getSeconds() > 9 ? this.getSeconds().toString() : '0' + this.getSeconds());
    str = str.replace(/s|S/g, this.getSeconds());

    return str;
},





    })
</script>
</body>>
</html>